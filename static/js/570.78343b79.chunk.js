"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[570],{1570:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var n=a(5861),r=a(885),s=a(4687),o=a.n(s),c=a(2791),i="ContactForm_form__dhl+T",l="ContactForm_label__-cVXI",u="ContactForm_input__Bl93P",d="ContactForm_addBtn__CACuJ",m=a(8174),h=function(e){m.Am.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})},p=function(e){m.Am.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"})},f=a(5065),g=a(184);function b(){var e=(0,c.useState)(""),t=(0,r.Z)(e,2),a=t[0],s=t[1],b=(0,c.useState)(""),C=(0,r.Z)(b,2),_=C[0],x=C[1],v=(0,f.wY)().data,j=(0,f.Tn)(),k=(0,r.Z)(j,2),N=k[0],w=k[1],F=w.isLoading,L=w.isSuccess,Z=function(){var e=(0,n.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!v.some((function(e){return e.name.toLowerCase()===a.toLocaleLowerCase()}))){e.next=4;break}return r="Contact ".concat(a," already exists"),m.Am.warn(r,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"dark"}),e.abrupt("return");case 4:return n={name:a,number:_},e.prev=5,e.next=8,N(n);case 8:L&&(h("Contact added "),s(""),x("")),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),p(e.t0.message);case 14:case"end":return e.stop()}var r}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),y=function(e){switch(e.target.name){case"name":s(e.target.value);break;case"number":x(e.target.value);break;default:return}};return(0,g.jsxs)("form",{className:i,autoComplete:"off",onSubmit:Z,children:[(0,g.jsxs)("label",{className:l,children:["Name",(0,g.jsx)("input",{className:u,onChange:y,type:"text",name:"name",value:a,pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0})]}),(0,g.jsxs)("label",{className:l,children:["Number",(0,g.jsx)("input",{className:u,value:_,onChange:y,type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"number number must be at least 5 digits and can contain spaces, dashes, parentheses and can start with +",required:!0})]}),(0,g.jsx)("button",{className:d,type:"submit",disabled:!a||!_,children:F?"Loading...":" Add contact"})]})}var C="ContactItem_contactItem__Z4FuP",_="ContactItem_button__IRFBz",x=function(e){var t=e.name,a=e.number,n=e.id,s=(0,f.Nt)(),o=(0,r.Z)(s,2),c=o[0],i=o[1],l=i.isSuccess,u=i.isLoading;return l&&h("Contact deleted"),(0,g.jsxs)("li",{className:C,children:[(0,g.jsx)("p",{children:t}),(0,g.jsx)("p",{children:a}),(0,g.jsx)("button",{className:_,onClick:function(){return c(n)},type:"button",disabled:u,children:u?"Deleting...":"Delete"})]})},v="ContactList_contactList__UFVCg",j="ContactList_loading__QJfkF",k=a(5048),N=a(6895),w=function(){var e=(0,k.v9)(N.zK),t=(0,f.wY)(),a=t.data,n=t.error,r=t.isLoading,s=t.refetch;(0,c.useEffect)((function(){s()}),[s]);var o=function(){var t=e.toLocaleLowerCase().trim();if(a)return a.filter((function(e){return e.name.toLocaleLowerCase().includes(t)}))}();return(0,g.jsxs)(g.Fragment,{children:[r&&(0,g.jsx)("div",{className:j,children:"Loading..."}),a&&(0,g.jsx)("ul",{className:v,children:0!==o.length?o.map((function(e){var t=e.name,a=e.number,n=e.id;return(0,g.jsx)(x,{id:n,name:t,number:a},n)})):(0,g.jsxs)("li",{children:[" Contact ",e," not found "]})}),n&&(0,g.jsx)("p",{children:"Ups, something was wrong!"})]})},F="Filter_input__N7T3z",L="Filter_label__vEd1E",Z=function(){var e=(0,k.I0)(),t=(0,k.v9)(N.zK);return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("label",{className:L,children:["Find contacts by name",(0,g.jsx)("input",{className:F,type:"text",value:t,onChange:function(t){e((0,N.M6)(t.target.value))}})]})})},y=a(1289),A=function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h1",{className:y.Z.title,children:"Phonebook"}),(0,g.jsx)(b,{}),(0,g.jsx)("h2",{className:y.Z.title,children:"Contacts"}),(0,g.jsx)(Z,{}),(0,g.jsx)(w,{})]})}}}]);
//# sourceMappingURL=570.78343b79.chunk.js.map